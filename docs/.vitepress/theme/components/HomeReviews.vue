<script setup lang="ts">
import { useData } from 'vitepress';
import { computed } from 'vue';
import { Vue3Marquee } from 'vue3-marquee';

const { lang } = useData();

interface I18nData {
  title: string;
  subtitle: string;
  highlightText: string;
  tryVoyagerText: string;
}

const i18n: Record<string, I18nData> = {
  'zh-CN': {
    title: 'æ·±å—ç¤¾åŒºå–œçˆ±',
    subtitle: 'ä¸æ•°ä¸‡å Voyager åŒè¡Œï¼Œä»å®¹æŒæ§ Gemini å·¥ä½œæµã€‚',
    highlightText: 'ğŸ‰ æ„Ÿè°¢çŸ¥åç§‘æŠ€åœˆå¤§ V ä¸ç¤¾åŒºçš„å¼ºçƒˆæ¨èï¼',
    tryVoyagerText:
      'åœ¨ 2 æœˆ 18 å· Google Gemini App å¯¼è‡´éƒ¨åˆ†ç”¨æˆ·å†å²å¯¹è¯æ— æ³•è®¿é—®çš„é—®é¢˜ä¸­ï¼ŒVoyager çš„ç”¨æˆ·ä»ç„¶èƒ½å¤Ÿåœ¨å…¶æ–‡ä»¶å¤¹ä¸­çœ‹åˆ°è¢«ä¿å­˜ä¸‹æ¥çš„å¯¹è¯ã€‚',
  },
  'en-US': {
    title: 'Loved by the Community',
    subtitle: 'Join tens of thousands of users organizing their Gemini workspace.',
    highlightText: 'ğŸ‰ Highly recommended by top tech KOLs and the community!',
    tryVoyagerText:
      "During the issue on February 18th where the Google Gemini App caused some users' historical conversations to become inaccessible, Voyager users were still able to see their saved conversations in their folders.",
  },
  'ja-JP': {
    title: 'ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰æ„›ã•ã‚Œã¦ã„ã¾ã™',
    subtitle: 'æ•°ä¸‡äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ä¸€ç·’ã«ã€Gemini ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ•´ç†ã—ã¾ã—ã‚‡ã†ã€‚',
    highlightText: 'ğŸ‰ ãƒˆãƒƒãƒ—ãƒ†ãƒƒã‚¯KOLã‚„ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰å¼·ãæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ï¼',
    tryVoyagerText:
      '2æœˆ18æ—¥ã«Google Gemini AppãŒä¸€éƒ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å±¥æ­´ä¼šè©±ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚‹å•é¡Œã‚’å¼•ãèµ·ã“ã—ãŸéš›ã€Voyagerã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¼•ãç¶šããƒ•ã‚©ãƒ«ãƒ€å†…ã«ä¿å­˜ã•ã‚ŒãŸä¼šè©±ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚',
  },
  'fr-FR': {
    title: 'AimÃ© par la CommunautÃ©',
    subtitle:
      "Rejoignez des dizaines de milliers d'utilisateurs qui organisent leur espace de travail Gemini.",
    highlightText: 'ğŸ‰ Fortement recommandÃ© par les meilleurs influenceurs tech !',
    tryVoyagerText:
      "Lors du problÃ¨me du 18 fÃ©vrier oÃ¹ l'application Google Gemini a rendu inaccessibles les conversations historiques de certains utilisateurs, les utilisateurs de Voyager ont toujours pu voir leurs conversations enregistrÃ©es dans leurs dossiers.",
  },
  'es-ES': {
    title: 'Amado por la Comunidad',
    subtitle: 'Ãšnete a decenas de miles de usuarios organizando su espacio de trabajo en Gemini.',
    highlightText: 'ğŸ‰ Â¡Altamente recomendado por los principales influencers tecnolÃ³gicos!',
    tryVoyagerText:
      'Durante el problema del 18 de febrero en el que la aplicaciÃ³n Google Gemini hizo inaccesibles las conversaciones histÃ³ricas de algunos usuarios, los usuarios de Voyager aÃºn pudieron ver sus conversaciones guardadas en sus carpetas.',
  },
};

const t = computed(() => {
  return i18n[lang.value as string] || i18n['en-US'];
});

interface Review {
  name: string;
  username?: string;
  avatar: string;
  content: string;
  source?: 'Chrome Web Store' | 'Edge Add-ons' | 'X';
}

const reviews: Review[] = [
  {
    name: 'Shuyun Yang',
    avatar:
      'https://lh3.googleusercontent.com/a/ACg8ocI4nd0KLo2Cgi8PSmkl9oUxy6Dm-fIMqepv-uR0hpGHt7Zw3A=s48-w48-h48',
    content: 'éå¸¸å¥½ç”¨ï¼Œæœ€å…¨æœ€é¡ºæ»‘çš„æ‰©å±•ï¼',
    source: 'Chrome Web Store',
  },
  {
    name: 'Aimee Chen',
    avatar:
      'https://lh3.googleusercontent.com/a-/ALV-UjUMiFlYAN-GdaQWqSepuvA_JuWDNWLTrx-VFrCjK0J2DeD4_QN5Ig=s48-w48-h48',
    content:
      'å¤ªå¥½ç”¨äº†ï¼Œhelps a lot!! è§£æ±ºå¾ˆå¤šå°è©±æ¡†é›œäº‚åŠä¸€ç›´ä¸Šä¸‹æ²æ‰¾è³‡æ–™çš„å›°æ“¾ï¼Œå®‰è£å®Œé¦¬ä¸Šç›´è¦ºæ“ä½œï¼Œç¥å™¨å‘€!!',
    source: 'Chrome Web Store',
  },
  {
    name: '@yug1224',
    avatar: 'https://pbs.twimg.com/profile_images/1600779910720520192/QKdZC5yr_400x400.jpg',
    content:
      'Geminiã®æ“ä½œæ€§ã‚’é«˜ã‚ã‚‹æ‹¡å¼µæ©Ÿèƒ½ç¾¤ã‚‰ã—ã„ã€‚ãƒãƒ£ãƒƒãƒˆç®¡ç†ã‚„æ©Ÿèƒ½è¿½åŠ ã§ä½œæ¥­åŠ¹ç‡ãŒä¸ŠãŒã‚Šãã†ã‹ãªã€‚',
    source: 'X',
  },
  {
    name: 'Hi Sanzee',
    avatar:
      'https://lh3.googleusercontent.com/a-/ALV-UjVKp0gzYvVWOcKVbXxpZqAwo8tZer5qv6isJoYeVfZet7C28aQh=s48-w48-h48',
    content:
      'This is a god send. Thank you so much. Someone who Designs and Develops. This is a gold mine I was searching for.',
    source: 'Chrome Web Store',
  },
  {
    name: 'Mars Wang',
    avatar:
      'https://lh3.googleusercontent.com/a-/ALV-UjX9WVnxeHbGZOkSMFxgtrFxUeCpqxKiGW213iWf-XIYuQBJ2KM=s48-w48-h48',
    content:
      'omg, this is exactly what I need. Looking forward for more functions! Thank you for open scourse!',
    source: 'Chrome Web Store',
  },
  {
    name: 'CCC',
    avatar:
      'https://lh3.googleusercontent.com/a/ACg8ocIYRaHTC91ZFa_QS3wyFxv97bgOgWiJxtwcxhXVn13XJIDNMVP7=s48-w48-h48',
    content: 'å¿…é ˆå¤§æ¨ï¼æ–‡ä»¶å¤¾åŠŸèƒ½è¶…å¥½ç”¨ï¼Œæ ¹æœ¬åƒåŸè£è»Ÿä»¶ï¼Œå±Œç¿»å¤©ã€‚',
    source: 'Chrome Web Store',
  },
  {
    name: 'frequnet san',
    avatar:
      'https://lh3.googleusercontent.com/a/ACg8ocJ0vcIr0k64uGkLU7pJ1mXmSPm28uKfedjge0Jf7zvwdiDjaQ=s48-w48-h48',
    content:
      "It's helpful to use gemini with study / research for students like me, more details in readme of github help a lot!",
    source: 'Chrome Web Store',
  },
  {
    name: 'Kook Wu',
    avatar:
      'https://lh3.googleusercontent.com/a-/ALV-UjUf2aLVqTH5ji5yAq1-dRfmghfn0-Zik1Thg593VfEsIuLMpY5i=s48-w48-h48',
    content: 'è¿™ä¸ªä¸–ç•Œå®Œç¾äº†',
    source: 'Chrome Web Store',
  },
  {
    name: 'LYNXUTE',
    avatar:
      'https://lh3.googleusercontent.com/a-/ALV-UjVQNBHXfgi56K3ekpxu7rsMKD0Iv5KJA5fmL31IcQM6oWHZMxw=s48-w48-h48',
    content: 'çˆ±éŸ³ç¥äº†',
    source: 'Chrome Web Store',
  },
];
</script>

<template>
  <div class="reviews-section">
    <h2 class="title">{{ t.title }}</h2>

    <div class="highlight-banner">
      <!-- Try Voyager Promo -->
      <a
        href="https://x.com/Nag1ovo/status/2024509398601597412?s=20"
        target="_blank"
        rel="noopener noreferrer"
        class="promo-card"
        style="text-decoration: none"
      >
        <img src="/assets/try-voyager.png" alt="Try Voyager" class="promo-image" />
        <div class="promo-text">{{ t.tryVoyagerText }}</div>
      </a>

      <!-- X Recommendation -->
      <div class="promo-card x-recommendation-card">
        <a
          href="https://x.com/Nag1ovo/status/2024509398601597412?s=20"
          target="_blank"
          rel="noopener noreferrer"
          class="highlight-text-card"
        >
          {{ t.highlightText }}
        </a>
        <a
          href="https://x.com/Nag1ovo/status/2024507762483277927?s=20"
          target="_blank"
          rel="noopener noreferrer"
          class="highlight-image-link"
        >
          <img
            src="/assets/x-recommendation.png"
            alt="Recommendation from @DataChaz"
            class="highlight-image"
          />
        </a>
      </div>
    </div>

    <p class="subtitle">{{ t.subtitle }}</p>

    <Vue3Marquee :pause-on-hover="true" :duration="40" class="marquee-wrapper">
      <div v-for="(review, index) in reviews" :key="index" class="review-card">
        <div class="card-header">
          <img
            :src="review.avatar"
            :alt="review.name"
            class="avatar"
            loading="lazy"
            referrerpolicy="no-referrer"
          />
          <div class="user-info">
            <div class="name">{{ review.name }}</div>
            <div class="source" v-if="review.source">{{ review.source }}</div>
          </div>
        </div>
        <p class="content">"{{ review.content }}"</p>
      </div>
    </Vue3Marquee>
  </div>
</template>

<style scoped>
.reviews-section {
  margin-top: 64px;
  margin-bottom: 64px;
  padding: 0 24px;
  text-align: center;
}

.title {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 12px;
  background: var(--vp-home-hero-name-background);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.subtitle {
  font-size: 18px;
  color: var(--vp-c-text-2);
  margin-bottom: 48px;
}

.highlight-banner {
  display: flex;
  justify-content: center;
  align-items: stretch;
  gap: 24px;
  margin-bottom: 32px;
  flex-wrap: wrap;
}

.promo-card {
  flex: 1;
  min-width: 300px;
  max-width: 500px;
  background: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-bg-soft-up);
  border-radius: 16px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  transition:
    transform 0.2s ease,
    border-color 0.2s ease;
}

.promo-card:hover {
  transform: translateY(-2px);
  border-color: var(--vp-c-brand-1);
}

.promo-image {
  width: 100%;
  max-width: 460px;
  height: auto;
  border-radius: 12px;
  margin-bottom: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  object-fit: contain;
}

.promo-text {
  font-size: 14px;
  color: var(--vp-c-text-2);
  line-height: 1.5;
  font-style: italic;
  text-align: center;
}

.x-recommendation-card {
  gap: 16px;
}

.highlight-text-card {
  width: 100%;
  background: var(--vp-c-bg-mutate);
  border: 1px solid var(--vp-c-brand-soft);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--vp-c-text-1);
  font-weight: 600;
  font-size: 16px;
  text-decoration: none;
  text-align: center;
  line-height: 1.5;
  transition: color 0.2s ease;
}

.highlight-text-card:hover {
  color: var(--vp-c-brand-1);
}

.highlight-image-link {
  display: block;
  width: 100%;
  transition: transform 0.2s ease;
}

.highlight-image-link:hover {
  transform: translateY(-2px);
}

.highlight-image {
  width: 100%;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  object-fit: contain;
}

.marquee-wrapper {
  mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
  -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
}

.review-card {
  width: 320px;
  height: 180px; /* Fixed height for uniformity */
  background: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-bg-soft-up);
  border-radius: 16px;
  padding: 24px;
  margin: 0 16px;
  display: flex;
  flex-direction: column;
  transition:
    transform 0.2s ease,
    border-color 0.2s ease;
  text-align: left;
}

.review-card:hover {
  transform: translateY(-4px);
  border-color: var(--vp-c-brand-1);
}

.card-header {
  display: flex;
  align-items: center;
  margin-bottom: 16px;
}

.avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  margin-right: 12px;
  background-color: var(--vp-c-bg-mute); /* Placeholder bg */
}

.user-info {
  display: flex;
  flex-direction: column;
}

.name {
  font-weight: 600;
  font-size: 15px;
  color: var(--vp-c-text-1);
  line-height: 1.2;
}

.source {
  font-size: 12px;
  color: var(--vp-c-text-3);
  margin-top: 2px;
}

.content {
  font-size: 14px;
  color: var(--vp-c-text-2);
  line-height: 1.5;
  margin: 0;
  display: -webkit-box;
  -webkit-line-clamp: 4;
  -webkit-box-orient: vertical;
  overflow: hidden;
  font-style: italic;
}
</style>
